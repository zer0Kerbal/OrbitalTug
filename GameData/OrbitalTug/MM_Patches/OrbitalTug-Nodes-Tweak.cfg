// v0.11

// correct node orientation on both Adapters
@PART[adaptorCarrier,fwdAdaptor]:NEEDS[OrbitalTug]:After[OrbitalTug]
{ 
	@node_stack_mid = 	0.0, -0.01, 0.0, 	0.0, 1.0, 0.0, 1 
}

// Add Attachment node to engineOnArm
@PART[engineOnArm]:NEEDS[OrbitalTug]:After[OrbitalTug]
{
	node_stack_connect01 = 0,0,0.3, 0,0,1,1	
	@attachRules = 1,1,1,0,0
}

// add attachment nodes to TugCore
// if B9PartSwitch installed, set up 4/2/0 node switch
// change node size from 2 to 1 to match rest of parts
@PART[OrbitalTugCore]:NEEDS[OrbitalTug]:After[OrbitalTug] {
   @node_stack_top = 0, 0.76, 0, 0, 1, 0, 1
   @node_stack_bottom = 0, -0.76, 0, 0, -1, 0, 1
	
	node_stack_connect01 = 0.63, 0, 0, 1,0,0,	1
	node_stack_connect02 = -0.63, 0, 0, -1,0,0,	1
	node_stack_connect03 = 0, 0, 0.63, 0,0,1,	1
	node_stack_connect04 = 0, 0, -0.63, 0,0,-1,	1
	
	MODULE:NEEDS[B9PartSwitch] {
		name = ModuleB9PartSwitch
		moduleID = sideNodes
		SUBTYPE {
			name = Quad Nodes
			node = top
			node = bottom
			node = connect01
			node = connect02
			node = connect03
			node = connect04
			stackSymmetry = 3
		}
		SUBTYPE {
			name = Dual Nodes
			node = top
			node = bottom
			node = connect01
			node = connect02
			stackSymmetry = 1   
		}       
		SUBTYPE {
			name = No Nodes
			node = top
			node = bottom
			stackSymmetry = 0
		}
	}	
}

// Add Attachment node to engineOnArm
// Correct attachRules to allow node attachment
// if B9PartSwitch installed, set up 3/1 node switch
@PART[engineOnArm]:NEEDS[OrbitalTug]:After[OrbitalTug]
{
	node_stack_connect01 = 0,0,0.3, 0,0,1,1
	
	node_stack_connect02 = 0,0.3 ,0.3, 0,0,-1,0
	node_stack_connect03 = 0,-0.45 ,0.24, 0,0,-1,0
	
	@attachRules = 1,1,1,0,0
	
	MODULE:NEEDS[B9PartSwitch]	{
	name = ModuleB9PartSwitch
	moduleID = hiddenNodes
		SUBTYPE {
			name = No Nodes
			node = connect01
		}
		SUBTYPE {
			name = Extra Nodes
			node = connect01
			node = connect02
			node = connect03
			stackSymmetry = 3
		}
	}
}

// Add Attachment node to helperDrone
// Correct attachRules to allow node attachment
// if B9PartSwitch installed, set up 2/1 node switch
@PART[helperDrone]:NEEDS[OrbitalTug]:After[OrbitalTug]
{
	node_stack_top = 0.0, 0.22, 0.0, 0,1,0,0
	node_stack_bottom = 0.0, -0.2, 0.0, 0,-1,0,0
	
	@attachRules = 1,1,1,0,0
	
	MODULE:NEEDS[B9PartSwitch]	{
	name = ModuleB9PartSwitch
	moduleID = hiddenNodes
		SUBTYPE {
			name = Bottom Nodes
			node = bottom
		}
		SUBTYPE {
			name = Both Node
			node = top
			node = bottom
		}
	}
}

// Add Attachment node to DronePod
// Correct attachRules to allow node attachment
// if B9PartSwitch installed, set up 3/1 node switch
@PART[DronePod]:NEEDS[OrbitalTug]:After[OrbitalTug]
{
	node_stack_connect01 = -0.58, 0.0, 0.0, -1,0,0,0
	node_stack_connect02 = 0.58, 0.0, 0.0, 1,0,0,0

	node_stack_connect03 = -0.54, 0.4, 0.0, -1,0,0,0
	node_stack_connect04 = 0.54, 0.4, 0.0, 1,0,0,0
	
	node_stack_connect05 = -0.38, 0.8, 0.0, 0,1,0,0
	node_stack_connect06 = 0.38, 0.8, 0.0, 0,1,0,0
	
	@attachRules = 1,1,1,0,0
	
	MODULE:NEEDS[B9PartSwitch]	{
	name = ModuleB9PartSwitch
	moduleID = noNodes
		SUBTYPE {
			name = No Nodes
		}
		SUBTYPE {
			name = Bottom Nodes
			node = connect01
			node = connect02
			stackSymmetry = 2
		}
		SUBTYPE {
			name = Botom Mid Node
			node = connect01
			node = connect02
			node = connect03
			node = connect04
			stackSymmetry = 2
		}
		SUBTYPE {
			name = All Node
			node = connect01
			node = connect02
			node = connect03
			node = connect04
			node = connect05
			node = connect06
			stackSymmetry = 2
		}
	}
}

// Add Attachment node to OrbitalTugPod
// Correct attachRules to allow node attachment
// if B9PartSwitch installed, set up 3/1 node switch
@PART[OrbitalTugPod]:NEEDS[OrbitalTug]:After[OrbitalTug]
{
	node_stack_connect01 = -0.58, 0.0, 0.0, -1,0,0,0
	node_stack_connect02 = 0.58, 0.0, 0.0, 1,0,0,0

	node_stack_connect03 = -0.54, 0.4, 0.0, -1,0,0,0
	node_stack_connect04 = 0.54, 0.4, 0.0, 1,0,0,0
	
	node_stack_connect05 = -0.38, 0.8, 0.0, 0,1,0,0
	node_stack_connect06 = 0.38, 0.8, 0.0, 0,1,0,0

	@attachRules = 1,1,1,0,0
	
	MODULE:NEEDS[B9PartSwitch]	{
	name = ModuleB9PartSwitch
	moduleID = noNodes
		SUBTYPE {
			name = No Nodes
		}
		SUBTYPE {
			name = Bottom Nodes
			node = connect01
			node = connect02
			stackSymmetry = 2
		}
		SUBTYPE {
			name = Botom Mid Node
			node = connect01
			node = connect02
			node = connect03
			node = connect04
			stackSymmetry = 2
		}
		SUBTYPE {
			name = All Node
			node = connect01
			node = connect02
			node = connect03
			node = connect04
			node = connect05
			node = connect06
			stackSymmetry = 2
		}
	}
}

// Add Attachment node to fwdAdaptor
// Correct attachRules to allow node attachment
// if B9PartSwitch installed, set up 3/1 node switch
@PART[fwdAdaptor,adaptorCarrier]:NEEDS[OrbitalTug]:After[OrbitalTug]
{
	node_stack_connect01 = -0.14, -0.35, -0.15, -1,0,-1,0
	node_stack_connect02 = 0.14, -0.35, 0.15, 1,0,1,0
	
	node_stack_connect03 = 0.14, -0.35, -0.15, 1,0,-1,0
	node_stack_connect04 = -0.14, -0.35, 0.15, -1,0,1,0
	
	
	node_stack_connect05 = -0.37, 0.0, -0.63, -.8,0,-.9,0
	node_stack_connect06 = 0.37, 0.0, 0.63, -.8,0,-.9,0
	node_stack_connect05 = -0.37, 0.0, 0.63, -.8,0,.9,0
	node_stack_connect06 = 0.37, 0.0, -0.63, .8,0,-.9,0
		
	node_stack_connect07 = -0.37, 0.6, -0.63, -.8,0,-.9,0
	node_stack_connect08 =  0.37, 0.6, 0.63, -.8,0,-.9,0
	node_stack_connect09 = -0.37, 0.6, 0.63, -.8,0,.9,0
	node_stack_connect10 =  0.37, 0.6, -0.63, .8,0,-.9,0
		
	node_stack_connect11 = -0.37, 1.2, -0.63, -.8,0,-.9,0
	node_stack_connect12 =  0.37, 1.2, 0.63, -.8,0,-.9,0
	node_stack_connect13 = -0.37, 1.2, 0.63, -.8,0,.9,0
	node_stack_connect14 =  0.37, 1.2, -0.63, .8,0,-.9,0
}

// zer0Kerbal
